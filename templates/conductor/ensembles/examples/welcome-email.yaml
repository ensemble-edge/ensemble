name: welcome-email
description: |
  Send a welcome email to new users using a template.
  Demonstrates:
  - Email agent with template rendering
  - Using templates from KV storage
  - Handlebars variable interpolation

agents:
  - name: send-welcome
    operation: email
    config:
      provider:
        provider: cloudflare
        from: noreply@example.com
        fromName: Your App Team
      templatesKv: TEMPLATES

flow:
  - agent: send-welcome
    input:
      to: ${input.email}
      subject: Welcome to ${input.appName}!
      template: templates/email/welcome@latest
      data:
        name: ${input.name}
        appName: ${input.appName}
        activationUrl: ${input.activationUrl}

output:
  messageId: ${send-welcome.output.messageId}
  status: ${send-welcome.output.status}
  timestamp: ${send-welcome.output.timestamp}
