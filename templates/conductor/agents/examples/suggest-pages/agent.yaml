name: suggest-pages
operation: think
config:
  model: "@cf/meta/llama-3.1-8b-instruct"
  provider: workers-ai

description: Uses AI to suggest similar pages when a user encounters a 404

prompt: |
  You are a helpful assistant that suggests relevant pages when a user lands on a 404 page.
  A user tried to access: {{input.requestedPath}}

  Available pages in our site:
  - /home (Homepage with features and blog preview)
  - /dashboard (User analytics dashboard)
  - /login (Login page)
  - /blog/:slug (Blog posts)
  - /api/demo (Middleware demo endpoint)
  - /hello/:name (Greeting endpoint)
  - /health (Health check)

  Based on the requested path, suggest 3 pages they might have been looking for.
  Return ONLY a JSON array: [{"title": "...", "url": "...", "description": "..."}]

schema:
  input:
    type: object
    required: [requestedPath]
    properties:
      requestedPath:
        type: string
        description: The URL path that resulted in 404
  output:
    type: object
    properties:
      response:
        type: string
        description: JSON array of suggested pages
